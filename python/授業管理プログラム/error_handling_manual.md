# エラー対応マニュアル

以下は、これまで書かれたコードにおいて、エラーが発生した際の原因、解決方法、そして適切な対応方法を解説したマニュアルです。

---

## 1. エラー: `FileNotFoundError`
### 発生箇所
- `load_data` メソッドで、JSONファイルを読み込む際に発生する可能性があります。

### 原因
- 指定されたファイルが存在しない場合に発生します。
- 例: `lessons.json` や `schedule.json` のファイルが存在しない。

### 対応方法
1. **原因確認**:
   - ファイルの保存先フォルダ (`/content/drive/My Drive/SchoolManager`) にファイルが存在するか確認してください。
   - Google Driveが適切にマウントされているか確認します。

2. **解決方法**:
   - ファイルが存在しない場合、新しい空のJSONファイルを作成してください。
     - 例: `lessons.json` の場合、以下の内容でファイルを作成します。
       ```json
       {}
       ```
   - Google Driveが正しく連携されているか再確認し、必要であれば再マウントしてください。

---

## 2. エラー: `json.JSONDecodeError`
### 発生箇所
- `load_data` メソッドで、JSONデータを読み込む際に発生する可能性があります。

### 原因
- JSONファイルのフォーマットが破損している、または不正な構造になっている場合に発生します。
- 例: 不適切な文字列や、閉じられていない括弧などが含まれている。

### 対応方法
1. **原因確認**:
   - JSONファイルをテキストエディタで開き、構造が正しいか確認します。
   - JSONファイルが破損している場合、エラー箇所を修正します。

2. **解決方法**:
   - JSONの構造を修正する際に以下のルールを守ります。
     - すべてのキーと値は、`"`（ダブルクォート）で囲む。
     - 各キーと値のペアは `,`（カンマ）で区切る。
     - 配列やオブジェクトの開始と終了には `[` `]` または `{` `}` を使う。

3. **例**:
   - 修正前:
     ```json
     { "subject": "国語", "materials": ["教科書", "ノート" "鉛筆"] }
     ```
   - 修正後:
     ```json
     { "subject": "国語", "materials": ["教科書", "ノート", "鉛筆"] }
     ```

---

## 3. エラー: `IOError`
### 発生箇所
- `save_data` メソッドで、JSONデータを保存する際に発生する可能性があります。

### 原因
- ファイルへの書き込み権限がない、またはストレージがいっぱいの場合に発生します。
- Google Driveのマウントが解除されている場合にも発生する可能性があります。

### 対応方法
1. **原因確認**:
   - Google Driveが正しくマウントされているか確認してください。
   - 書き込み先のディスク容量が十分にあるか確認します。

2. **解決方法**:
   - Google Driveがマウントされていない場合は再マウントします。
   - 必要に応じて不要なファイルを削除して空き容量を確保します。

---

## 4. エラー: `ValueError` (日付の形式が不正)
### 発生箇所
- `validate_date` メソッドで、日付の形式を検証する際に発生する可能性があります。

### 原因
- ユーザーが入力した日付が `YYYY-MM-DD` の形式になっていない場合に発生します。
- 例: `2025/05/08` や `08-05-2025` のような形式。

### 対応方法
1. **原因確認**:
   - 入力した日付が `YYYY-MM-DD` 形式になっているか確認してください。

2. **解決方法**:
   - 正しい形式で日付を入力します。
     - 例: `2025-05-08`

3. **例外処理のメッセージが出た場合**:
   - 出力されたエラーメッセージに従い、日付を修正してください。

---

## 5. エラー: `KeyError` (授業が存在しない)
### 発生箇所
- 授業を削除・編集・持ち物や提出物を追加/削除する際に発生する可能性があります。

### 原因
- 指定された日付や時間に授業が存在しない場合に発生します。
- 例: `2025-05-08` の `1時間目` に授業が登録されていない。

### 対応方法
1. **原因確認**:
   - スケジュールを表示し、該当の日付や時間に授業が存在するか確認してください。

2. **解決方法**:
   - 授業を事前に追加してから操作を行います。
     - 例: `add_lesson` メソッドを使い、該当の日付と時間に授業を登録してください。

---

## 6. エラー: その他のエラー
### 発生箇所
- 予期しないエラーが発生した場合。

### 原因
- 未知のエラーの可能性があります。

### 対応方法
1. **原因確認**:
   - エラーの内容を確認し、エラーメッセージを記録します。

2. **解決方法**:
   - エラーメッセージをもとに原因を特定します。
   - 必要に応じて開発者またはサポートに相談してください。

---

## 備考
- すべてのエラーが発生した際には、まずエラーメッセージを読み、原因を特定することが重要です。
- 入力ミスが原因である場合が多いので、入力内容を再確認してください。